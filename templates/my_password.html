{% extends 'base.html' %}
{% block title %}ãƒã‚¤ãƒšãƒ¼ã‚¸{% endblock %}

{% block content %}
<style>
/* ãƒã‚¤ãƒšãƒ¼ã‚¸ã¯å¹…ã«ä½™è£•ã‚’æŒãŸã›ã‚‹ */
.container {
  max-width: 900px;
}
</style>
<h1 class="mb-4">ãƒã‚¤ãƒšãƒ¼ã‚¸</h1>

<div class="row">
  <div class="col-md-3 mb-3">
    <div class="list-group">
      <a href="{{ url_for('my_page') }}" class="list-group-item list-group-item-action">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</a>
      <a href="{{ url_for('my_password') }}" class="list-group-item list-group-item-action active">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</a>
    </div>
  </div>
  <div class="col-md-9">
    <h2 class="h5 mb-3">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´</h2>
    <form method="POST" autocomplete="off">
      <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">

      <div class="mb-3">
        <label for="current_password" class="form-label">ç¾åœ¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
        <div class="input-group">
          <input type="password"
            id="current_password"
            name="current_password"
            class="form-control {% if errors and errors.get('current_password') %}is-invalid{% endif %}"
            required>
          <button type="button" class="btn btn-outline-secondary" aria-label="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ"
            onclick="togglePwd('current_password', this)">ğŸ‘</button>
        </div>
        {% if errors and errors.get('current_password') %}
          <div class="invalid-feedback d-block">{{ errors.get('current_password') }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        <label for="new_password" class="form-label">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
        <div class="input-group">
          <input type="password"
            id="new_password"
            name="new_password"
            class="form-control {% if errors and errors.get('new_password') %}is-invalid{% endif %}"
            required>
          <button type="button" class="btn btn-outline-secondary" aria-label="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ"
            onclick="togglePwd('new_password', this)">ğŸ‘</button>
        </div>
        {% if errors and errors.get('new_password') %}
          <div class="invalid-feedback d-block">{{ errors.get('new_password') }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        <label for="confirm_password" class="form-label">æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç¢ºèªï¼‰</label>
        <div class="input-group">
          <input type="password"
            id="confirm_password"
            name="confirm_password"
            class="form-control {% if errors and errors.get('confirm_password') %}is-invalid{% endif %}"
            required>
          <button type="button" class="btn btn-outline-secondary" aria-label="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ"
            onclick="togglePwd('confirm_password', this)">ğŸ‘</button>
        </div>
        {% if errors and errors.get('confirm_password') %}
          <div class="invalid-feedback d-block">{{ errors.get('confirm_password') }}</div>
        {% endif %}
      </div>

      <div class="d-grid gap-2">
        <button type="submit" class="btn btn-primary">å¤‰æ›´ã™ã‚‹</button>
        <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">æˆ»ã‚‹</a>
      </div>
    </form>
  </div>
</div>

<script>
function togglePwd(id, btn) {
  const field = document.getElementById(id);
  if (field.type === "password") {
    field.type = "text";
    btn.innerText = "ğŸ™ˆ";
  } else {
    field.type = "password";
    btn.innerText = "ğŸ‘";
  }
}
</script>
{% endblock %}
