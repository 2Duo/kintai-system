{% extends 'base.html' %}

{% block title %}CSVインポートの衝突確認{% endblock %}

{% block content %}
<h2>CSVインポート時の衝突確認</h2>
<form method="POST" action="{{ url_for('resolve_conflicts') }}">
  <input type="hidden" name="referer" value="{{ url_for('view_my_logs') }}">
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>日付</th>
        <th>区分</th>
        <th>既存</th>
        <th>インポート</th>
        <th>選択</th>
      </tr>
    </thead>
    <tbody>
      {% for conflict in conflicts %}
      <tr>
        <td>{{ conflict.day }}</td>
        <td>{{ '出勤' if conflict.type == 'in' else '退勤' }}</td>
        <td>{{ conflict.existing[0][11:16] }} / {{ conflict.existing[1] }}</td>
        <td>{{ conflict.incoming[0][11:16] }} / {{ conflict.incoming[1] }}</td>
        <td>
          <input type="radio" name="{{ conflict.day }}_{{ conflict.type }}" value="existing" checked> 既存<br>
          <input type="radio" name="{{ conflict.day }}_{{ conflict.type }}" value="incoming"> 新規
          <input type="hidden" name="{{ conflict.day }}_{{ conflict.type }}_incoming_ts" value="{{ conflict.incoming[0] }}">
          <input type="hidden" name="{{ conflict.day }}_{{ conflict.type }}_incoming_desc" value="{{ conflict.incoming[1] }}">
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <button type="submit" class="btn btn-primary">確定</button>
</form>
{% endblock %}
